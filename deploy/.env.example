# =============================================================================
# Langfuse 生产环境配置 (.env)
# 用法: cp deploy/.env.example .env && 修改下方变量
# =============================================================================

# =============================================================================
# 安全密钥 (必须修改!)
# =============================================================================
# openssl rand -base64 32
NEXTAUTH_SECRET=CHANGEME_openssl_rand_base64_32
# openssl rand -base64 32
SALT=CHANGEME_openssl_rand_base64_32
# openssl rand -hex 32
ENCRYPTION_KEY=CHANGEME_openssl_rand_hex_32

# =============================================================================
# 访问地址
# =============================================================================
NEXTAUTH_URL=http://localhost:3000
# 对外暴露端口 (默认 3000)
WEB_PORT=3000

# =============================================================================
# Admin 账号 (首次启动自动创建，已有数据则跳过)
# =============================================================================
LANGFUSE_INIT_ORG_ID=xdan-org
LANGFUSE_INIT_ORG_NAME=xDAN
LANGFUSE_INIT_PROJECT_ID=xdan-agentops
LANGFUSE_INIT_PROJECT_NAME=xDAN AgentOps
LANGFUSE_INIT_PROJECT_PUBLIC_KEY=pk-lf-xdan-default
LANGFUSE_INIT_PROJECT_SECRET_KEY=sk-lf-xdan-default
LANGFUSE_INIT_USER_EMAIL=admin@xdan.ai
LANGFUSE_INIT_USER_NAME=Admin
LANGFUSE_INIT_USER_PASSWORD=xdan@2024

# =============================================================================
# PostgreSQL
# =============================================================================
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGEME_pg_password
POSTGRES_DB=postgres
DATABASE_URL=postgresql://postgres:CHANGEME_pg_password@postgres:5432/postgres

# =============================================================================
# ClickHouse
# =============================================================================
CLICKHOUSE_USER=clickhouse
CLICKHOUSE_PASSWORD=CHANGEME_ch_password
CLICKHOUSE_MIGRATION_URL=clickhouse://clickhouse:9000
CLICKHOUSE_URL=http://clickhouse:8123
CLICKHOUSE_CLUSTER_ENABLED=false

# =============================================================================
# Redis
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
# 宿主机暴露端口 (避开 6379 已被其他服务占用)
REDIS_HOST_PORT=6380
REDIS_AUTH=CHANGEME_redis_password

# =============================================================================
# MinIO (S3 兼容对象存储)
# =============================================================================
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=CHANGEME_minio_password

# S3 Event Upload
LANGFUSE_S3_EVENT_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_EVENT_UPLOAD_REGION=auto
LANGFUSE_S3_EVENT_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_EVENT_UPLOAD_SECRET_ACCESS_KEY=CHANGEME_minio_password
LANGFUSE_S3_EVENT_UPLOAD_ENDPOINT=http://minio:9000
LANGFUSE_S3_EVENT_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_EVENT_UPLOAD_PREFIX=events/

# S3 Media Upload
LANGFUSE_S3_MEDIA_UPLOAD_BUCKET=langfuse
LANGFUSE_S3_MEDIA_UPLOAD_REGION=auto
LANGFUSE_S3_MEDIA_UPLOAD_ACCESS_KEY_ID=minio
LANGFUSE_S3_MEDIA_UPLOAD_SECRET_ACCESS_KEY=CHANGEME_minio_password
LANGFUSE_S3_MEDIA_UPLOAD_ENDPOINT=http://minio:9000
LANGFUSE_S3_MEDIA_UPLOAD_FORCE_PATH_STYLE=true
LANGFUSE_S3_MEDIA_UPLOAD_PREFIX=media/

# S3 Batch Export
LANGFUSE_S3_BATCH_EXPORT_ENABLED=true
LANGFUSE_S3_BATCH_EXPORT_BUCKET=langfuse
LANGFUSE_S3_BATCH_EXPORT_PREFIX=exports/
LANGFUSE_S3_BATCH_EXPORT_REGION=auto
LANGFUSE_S3_BATCH_EXPORT_ENDPOINT=http://minio:9000
LANGFUSE_S3_BATCH_EXPORT_EXTERNAL_ENDPOINT=http://localhost:9090
LANGFUSE_S3_BATCH_EXPORT_ACCESS_KEY_ID=minio
LANGFUSE_S3_BATCH_EXPORT_SECRET_ACCESS_KEY=CHANGEME_minio_password
LANGFUSE_S3_BATCH_EXPORT_FORCE_PATH_STYLE=true

# =============================================================================
# 可选配置
# =============================================================================
TELEMETRY_ENABLED=true
LANGFUSE_ENABLE_EXPERIMENTAL_FEATURES=false

# 邮件 (可选)
# EMAIL_FROM_ADDRESS=noreply@xdan.ai
# SMTP_CONNECTION_URL=smtp://user:pass@smtp.example.com:587

# 禁止公开注册 (推荐生产环境开启)
# AUTH_DISABLE_SIGNUP=true
